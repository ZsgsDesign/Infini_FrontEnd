<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,initial-scale=1.0,width=device-width" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>Hello APP</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../css/aui.css" />
    <link rel="stylesheet" type="text/css" href="../css/ocf.css" />
    <link rel="stylesheet" type="text/css" href="../css/animate.min.css" />
    <style>
    .filter-control{
        box-shadow: 0 1px 6px rgba(0,0,0,.117647), 0 1px 4px rgba(0,0,0,.117647);
        position:fixed;
        left:0;
        right:0;
        top:0;
        z-index:900;
        background: #fff;
        padding:0 0.5rem;
    }
    .erp-product-card{
        display:flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom:0.75rem;
        padding:0.5rem;
    }
    .erp-product-card > div:first-of-type{
        margin-right:0.75rem;
    }
    .erp-product-card > div:last-of-type{
        text-align: right;
        flex-shrink: 0;
        flex-grow: 0;
    }
    #product_container{
        margin-top:3.7rem;
    }
    .erp-loading-more{
        justify-content: center;
    }
    .erp-product-card tr > td:last-of-type{
        text-align:left;
        padding-left:0.2rem;
    }
    cart .ocf-floating-button{
        position:absolute;
        top:-3.8rem;
        left:calc(100vw - 3.8rem);
        right:0;
    }
    cart{
        position:fixed;
        z-index: 997;
        right:0;
        left:0;
        transition: .3s ease-out .0s;
    }
    cart > section{
        padding:0.75rem;
        background:#fff;
        box-shadow: 0 -1px 6px rgba(0,0,0,.117647), 0 -1px 4px rgba(0,0,0,.117647);
    }
    cart > section > h2{
        display:flex;
        justify-content: space-between;
        align-items: center;
    }
    #cart-mask{
        background:rgba(0,0,0,0.25);
        z-index:991;
        opacity: 0;
        transition: .3s ease-out .0s;
        pointer-events:none;
    }
    #model-mask{
        background:rgba(0,0,0,0.25);
        z-index:997;
        opacity: 0;
        transition: .3s ease-out .0s;
        pointer-events:none;
    }
    #model_add{
        opacity: 0;
        transition: .3s ease-out .0s;
        pointer-events:none;
    }
    items{
        display:flex;
        justify-content: space-between;
        border-bottom:1px solid #eee;
        margin-left:0.5rem;
        padding:0 0.25rem;
        line-height:2;
    }
    #items_container{
        padding-top:0.75rem;
        overflow:scroll;
        max-height:50vh;
    }
    items > p:last-of-type{
        flex-shrink: 0;
        font-size:0.85rem;
    }
    items > p:first-of-type{
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        margin-right:0.5rem;
        font-size:0.85rem;
    }
    model{
        position:fixed;
        left:0;
        right:0;
        top:0;
        bottom:0;
        display:flex;
        align-items:center;
        justify-content: center;
        z-index:997;
    }
    model > card{
        width:auto;
        padding:0.75rem;
        box-shadow: 0 19px 60px rgba(0,0,0,.298039), 0 15px 20px rgba(0,0,0,.219608);
    }
    model > card > h3{
        font-weight:900;
        margin-bottom:0.75rem;
    }
    .erp-input-container{
        position: relative;
        margin-top:1.3rem;
    }
    .erp-input-container > inputholder{
        position: absolute;
        top:0;
        line-height:1;
        transform-origin: 0% 100%;
        text-align: initial;
        transform: translateY(0.4rem);
        font-size:0.8rem;
        opacity: 0.65;
        transition: .2s ease-out .0s;
        pointer-events: none;
    }
    .erp-input-container > input{
        border-bottom:1px solid #757575!important;
        line-height:2;
        height:auto;
        transition: .2s ease-out .0s;
    }
    .erp-input-container > input:focus{
        border-bottom:1px solid #009688!important;
    }
    .erp-input-container > .erp-active{
        transform: translateY(-0.7rem) scale(0.8);
        transform-origin: 0 0;
        opacity:1;
    }
    .erp-input-container > .erp-active-color{
        color: #009688;
    }
    card > footer{
        margin-top:0.75rem;
        display: flex;
        justify-content: flex-end;
        align-items: center;
    }
    card > footer > .erp-btn{
        margin-right:0.25rem;
        background:transparent;
    }
    card > footer > .erp-btn:last-of-type{
        margin-right:0;
        color: #009688;
    }
    </style>
</head>
<body>
    <hr class="ocf-app-line">
    <div id="loading" class="ocf-fixed-full aui-bg-white"></div>
    <section class="aui-content-padded filter-control">
        <input id="filter" type="text" class="ocf-trans" placeholder="输入搜索条件" tapmode>
    </section>
    <section class="aui-content-padded" id="product_container">
        <div class="ocf-card erp-product-card" onclick="OpenModel();" tapmode>
            <div>
                <h2>P031-02</h2>
                <p>dNTP Mix(10mM each)</p>
            </div>
            <div>
                <table>
                    <tr>
                        <td><div class="aui-label aui-label-danger">北京办</div></td>
                        <td>4</td>
                    </tr>
                    <tr>
                        <td><div class="aui-label aui-label-success">总量</div></td>
                        <td>26</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="ocf-card erp-product-card">
            <div>
                <h2>P031-02</h2>
                <p>dNTP Mix(10mM each)</p>
            </div>
            <div>
                <table>
                    <tr>
                        <td><div class="aui-label aui-label-danger">北京办</div></td>
                        <td>4</td>
                    </tr>
                    <tr>
                        <td><div class="aui-label aui-label-success">总量</div></td>
                        <td>26</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="ocf-card erp-product-card">
            <div>
                <h2>P031-02</h2>
                <p>dNTP Mix(10mM each)</p>
            </div>
            <div>
                <table>
                    <tr>
                        <td><div class="aui-label aui-label-danger">北京办</div></td>
                        <td>4</td>
                    </tr>
                    <tr>
                        <td><div class="aui-label aui-label-success">总量</div></td>
                        <td>26</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="ocf-card erp-product-card">
            <div>
                <h2>P031-02</h2>
                <p>dNTP Mix(10mM each)</p>
            </div>
            <div>
                <table>
                    <tr>
                        <td><div class="aui-label aui-label-danger">北京办</div></td>
                        <td>4</td>
                    </tr>
                    <tr>
                        <td><div class="aui-label aui-label-success">总量</div></td>
                        <td>26</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="ocf-card erp-product-card">
            <div>
                <h2>P031-02</h2>
                <p>dNTP Mix(10mM each)</p>
            </div>
            <div>
                <table>
                    <tr>
                        <td><div class="aui-label aui-label-danger">北京办</div></td>
                        <td>4</td>
                    </tr>
                    <tr>
                        <td><div class="aui-label aui-label-success">总量</div></td>
                        <td>26</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="ocf-card erp-product-card erp-loading-more">
            <p>加载更多…</p>
        </div>
    </section>
    <div id="cart-mask" class="ocf-fixed-full" onclick="cart();"></div>
    <div id="model-mask" class="ocf-fixed-full"></div>
    <model id="model_add">
        <card>
            <h3>加入购物车</h3>
            <div>
                <p>P031-02 将被添加到购物车。</p>
                <div class="erp-input-container">
                    <input type="number" onfocus="inputFocus(this);" onblur="inputBlur(this);">
                    <inputholder>数量</inputholder>
                </div>
                <div class="erp-input-container">
                    <input type="number" onfocus="inputFocus(this);" onblur="inputBlur(this);">
                    <inputholder>含税单价</inputholder>
                </div>
            </div>
            <footer>
                <div class="aui-btn erp-btn">取消</div>
                <div class="aui-btn erp-btn">添加</div>
            </footer>
        </card>
    </model>
    <cart style="top:100vh;">
        <div class="ocf-floating-button aui-bg-info" onclick="cart();"><i class="aui-iconfont icon-cart"></i></div>
        <section class="aui-content" id="cart">
            <h2><span>采购清单</span><small onclick="createOrder();">创建订单 <i class="aui-iconfont icon-chevron-right"></i></small></h2>
            <div id="items_container">
                <items>
                    <p>P031-02</p>
                    <p>5件</p>
                </items>
            </div>
        </section>
    </cart>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/ocf.js"></script>
<script type="text/javascript">
    var cartExtend=false;
    apiready = function() {
        init();
    };

    function init(){
        loaded();
    }

    function cart(){
        if(cartExtend){
            document.getElementsByTagName("cart")[0].style.cssText="top:100vh;";
            document.getElementById("cart-mask").style.cssText="opacity:0;pointer-events:none;";
            cartExtend=false;
        } else {
            document.getElementsByTagName("cart")[0].style.cssText="top:calc(100vh - "+$api.offset($api.byId('cart')).h+"px);";
            document.getElementById("cart-mask").style.cssText="opacity:1;pointer-events:auto;";
            cartExtend=true;
        }
    }
    function OpenModel(){
        document.getElementById("model-mask").style.cssText="opacity:1;pointer-events:auto;";
        document.getElementById("model_add").style.cssText="opacity:1;pointer-events:auto;";
    }
    function createOrder(){
        api.openWin({
            name: 'order-create',
            url: './order-create.html',
            animation:{
                type:"movein",               //动画类型（详见动画类型常量）
                subType:"from_right",       //动画子类型（详见动画子类型常量）
                duration:300                //动画过渡时间，默认300毫秒
            }
        });
    }
</script>

</html>
